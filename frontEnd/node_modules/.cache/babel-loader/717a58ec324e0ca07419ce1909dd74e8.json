{"ast":null,"code":"var _jsxFileName = \"/Users/egecaner/IDELTA/HyperLedgerPOC/POC/frontEnd/src/pages/addCar.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport { Button } from '@material-ui/core';\nimport { toast } from 'react-toastify';\nimport { any } from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst algosdk = require('algosdk');\n\nconst crypto = require('crypto');\n\nconst algodAddress = \"https://testnet.algoexplorerapi.io/\";\nconst algodToken = \"\";\nconst algodPort = \"\";\nlet AlgoSigner;\nlet account;\nlet algodClient = new algosdk.Algodv2(algodToken, algodAddress, algodPort);\n\nconst fs = require('fs');\n\nconst path = require('path');\n\nconst indexer_token = \"\";\nconst indexer_server = \"https://testnet.algoexplorerapi.io/idx2/\";\nconst indexer_port = 0;\nlet indexerClient = new algosdk.Indexer(indexer_token, indexer_server, indexer_port);\nlet stateless_acc_addr;\nvar check = algodClient.healthCheck().do();\n\nif (check) {\n  console.log(\"client connected\");\n}\n\nconst useStyles = makeStyles(theme => ({\n  margin: {\n    margin: theme.spacing(1)\n  }\n}));\n\nfunction hashPassPhrase(passPhrase) {\n  const hash = crypto.createHash('sha256');\n  hash.update(passPhrase);\n  return hash.digest('hex');\n} // helper function to await transaction confirmation\n// Function used to wait for a tx confirmation\n\n\nconst waitForConfirmation = async function (algodclient, txId) {\n  let status = await algodclient.status().do();\n  let lastRound = status[\"last-round\"];\n\n  while (true) {\n    const pendingInfo = await algodclient.pendingTransactionInformation(txId).do();\n\n    if (pendingInfo[\"confirmed-round\"] !== null && pendingInfo[\"confirmed-round\"] > 0) {\n      //Got the completed Transaction\n      console.log(\"Transaction \" + txId + \" confirmed in round \" + pendingInfo[\"confirmed-round\"]);\n      break;\n    }\n\n    lastRound++;\n    await algodclient.statusAfterBlock(lastRound).do();\n  }\n};\n\nasync function getTestNetPrimaryAccount() {\n  window.AlgoSigner.connect().then(d => {\n    console.log(\"Connect\");\n  }).catch(e => {\n    console.error(e);\n  });\n  await window.AlgoSigner.accounts({\n    ledger: 'TestNet'\n  }).then(d => {\n    if (d && d.length > 0) {\n      console.log(`Account found: ${JSON.stringify(d[0])}`);\n      account = d[0];\n    } else {\n      throw 'Primary test account not found in AlgoSigner.';\n    }\n  }).catch(e => {\n    console.log(JSON.stringify(e), 'bad');\n  });\n} // call application \n\n\nasync function callApp(client, index, appArgs, accounts) {\n  // define sender\n  try {\n    if (typeof window.AlgoSigner !== 'undefined') {\n      console.log(\"algosigner installed\");\n    } else {\n      console.log(\"algosigner not installed\");\n    }\n\n    window.AlgoSigner.connect().then(d => {\n      console.log(\"Connect\");\n    }).catch(e => {\n      console.error(e);\n    });\n    getTestNetPrimaryAccount(); // get node suggested parameters\n\n    let params = await client.getTransactionParams().do(); // comment out the next two lines to use suggested fee\n\n    params.fee = 1000;\n    params.flatFee = true; // create unsigned transaction   [str:addCar, str:Skoda, str: ]\n    //let state= await client.accountInformation(account.addr).do()\n    //let txn = algosdk.makeApplicationOptInTxn(sender, params, index);\n\n    let txn = algosdk.makeApplicationNoOpTxn(account.address, params, index, appArgs, accounts);\n    let txId = txn.txID().toString();\n    let base64Tx = window.AlgoSigner.encoding.msgpackToBase64(txn.toByte());\n    let signedTxs = await window.AlgoSigner.signTxn([{\n      txn: base64Tx\n    }]); // Get the base64 encoded signed transaction and convert it to binary\n\n    let signedTxn = window.AlgoSigner.encoding.base64ToMsgpack(signedTxs[0].blob); // Sign the transaction\n\n    console.log(\"Signed transaction with txID: %s\", txId); // Submit the transaction\n\n    await client.sendRawTransaction(signedTxn).do(); // Wait for confirmation\n\n    await waitForConfirmation(client, txId); // display results\n\n    let transactionResponse = await client.pendingTransactionInformation(txId).do();\n    console.log(\"Called app-id:\", transactionResponse['txn']['txn']['apid']);\n\n    if (transactionResponse['global-state-delta'] !== undefined) {\n      console.log(\"Global State updated:\", transactionResponse['global-state-delta']);\n    }\n\n    if (transactionResponse['local-state-delta'] !== undefined) {\n      console.log(\"Local State updated:\", transactionResponse['local-state-delta']);\n    }\n  } catch (error) {\n    console.log(`Failed: AddCar - ${error}`);\n    return 0;\n  }\n}\n\nasync function payment(to, amount, client) {\n  try {\n    window.AlgoSigner.connect().then(d => {\n      console.log(\"Connect\");\n    }).catch(e => {\n      console.error(e);\n    });\n    getTestNetPrimaryAccount(); // get node suggested parameters\n\n    let params = await client.getTransactionParams().do(); // comment out the next two lines to use suggested fee\n\n    params.fee = 1000;\n    params.flatFee = true; // create unsigned transaction   [str:addCar, str:Skoda, str: ]\n    //let state= await client.accountInformation(account.addr).do()\n    //let txn = algosdk.makeApplicationOptInTxn(sender, params, index);\n\n    let txn = algosdk.makePaymentTxnWithSuggestedParams(account.address, to, amount);\n    let txId = txn.txID().toString();\n    let base64Tx = window.AlgoSigner.encoding.msgpackToBase64(txn.toByte());\n    let signedTxs = await window.AlgoSigner.signTxn([{\n      txn: base64Tx\n    }]); // Get the base64 encoded signed transaction and convert it to binary\n\n    let signedTxn = window.AlgoSigner.encoding.base64ToMsgpack(signedTxs[0].blob); // Sign the transaction\n\n    console.log(\"Signed transaction with txID: %s\", txId); // Submit the transaction\n\n    await client.sendRawTransaction(signedTxn).do(); // Wait for confirmation\n\n    await waitForConfirmation(client, txId); // display results\n\n    let transactionResponse = await client.pendingTransactionInformation(txId).do();\n    console.log(\"Called app-id:\", transactionResponse['txn']['txn']['apid']);\n\n    if (transactionResponse['global-state-delta'] !== undefined) {\n      console.log(\"Global State updated:\", transactionResponse['global-state-delta']);\n    }\n\n    if (transactionResponse['local-state-delta'] !== undefined) {\n      console.log(\"Local State updated:\", transactionResponse['local-state-delta']);\n    }\n  } catch (error) {\n    console.log(`Failed: AddCar - ${error}`);\n    return 0;\n  }\n}\n\nasync function optIn() {\n  try {\n    // get suggested parameters\n    const params = await algodClient.getTransactionParams().do(); // comment out the next two lines to use suggested fee\n\n    params.fee = 1000;\n    params.flatFee = true;\n    let rand = Math.floor(Math.random() * 2 ** 64);\n    const data = \"#pragma version 4\\n\" + \"int \" + rand.toString() + \"\\n int 0\\n >\\n bz success\\n int 1\\nreturn \";\n    const results = await algodClient.compile(data).do();\n    console.log(\"Hash = \" + results.hash);\n    console.log(\"Result = \" + results.result);\n    const program = new Uint8Array(Buffer.from(results.result, \"base64\"));\n    const lsig = algosdk.makeLogicSig(program);\n    console.log(\"lsig : \" + lsig.address()); // create a transaction\n\n    const sender = lsig.address();\n    await payment(sender, 3000, algodClient);\n    stateless_acc_addr = sender;\n    const appIndex = 25351000;\n    const txn = algosdk.makeApplicationOptInTxn(sender, params, appIndex);\n    const rawSignedTxn = algosdk.signLogicSigTransactionObject(txn, lsig); // send raw LogicSigTransaction to network\n\n    const tx = await algodClient.sendRawTransaction(rawSignedTxn.blob).do();\n    console.log(\"Transaction : \" + tx.txId);\n    return lsig.address();\n    await waitForConfirmation(algodClient, tx.txId);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default function AddCar() {\n  _s();\n\n  const classes = useStyles(); //States\n\n  const [carID, setCarID] = React.useState('');\n  const [carMake, setCarMake] = React.useState('');\n  const [carModel, setCarModel] = React.useState('');\n  const [carColor, setCarColor] = React.useState('');\n  const [carOwner, setCarOwner] = React.useState(''); //Handlers\n\n  const handleCarID = event => {\n    setCarID(event.target.value);\n  };\n\n  const handleCarModel = event => {\n    setCarModel(event.target.value);\n  };\n\n  const handleCarMake = event => {\n    setCarMake(event.target.value);\n  };\n\n  const handleCarColor = event => {\n    setCarColor(event.target.value);\n  };\n\n  const handleCarOwner = event => {\n    setCarOwner(event.target.value);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      let appArgs = [];\n      appArgs.push(new Uint8Array(Buffer.from(\"addCar\")));\n      appArgs.push(new Uint8Array(Buffer.from(carID)));\n      appArgs.push(new Uint8Array(Buffer.from(carMake)));\n      appArgs.push(new Uint8Array(Buffer.from(carModel)));\n      appArgs.push(new Uint8Array(Buffer.from(carColor)));\n      await optIn();\n      let createCarEvent = await callApp(algodClient, 25351000, appArgs, [stateless_acc_addr]);\n    } catch (error) {\n      console.error(`Failed to evaluate transaction: ${error}`);\n    }\n  };\n\n  const allData = () => {\n    return {\n      'carID': carID,\n      'carColor': carColor,\n      'carModel': carModel,\n      'carOwner': carOwner,\n      'carMake': carMake\n    };\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      className: classes.margin,\n      id: \"input-with-icon-textfield\",\n      label: \"CarID\",\n      InputProps: {\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }, this)\n      },\n      onInput: handleCarID\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      className: classes.margin,\n      id: \"input-with-icon-textfield\",\n      label: \"Car Make\",\n      InputProps: {\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 25\n        }, this)\n      },\n      onInput: handleCarMake\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      className: classes.margin,\n      id: \"input-with-icon-textfield\",\n      label: \"Car Model\",\n      InputProps: {\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 25\n        }, this)\n      },\n      onInput: handleCarModel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      className: classes.margin,\n      id: \"input-with-icon-textfield\",\n      label: \"Car Color\",\n      InputProps: {\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 25\n        }, this)\n      },\n      onInput: handleCarColor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      className: classes.margin,\n      id: \"input-with-icon-textfield\",\n      label: \"Car Owner\",\n      InputProps: {\n        startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n          position: \"start\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 25\n        }, this)\n      },\n      onInput: handleCarOwner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleSubmit,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddCar, \"xL8NJdaWjDKG6C+qI1K7SwqQlQM=\", false, function () {\n  return [useStyles];\n});\n\n_c = AddCar;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddCar\");","map":{"version":3,"sources":["/Users/egecaner/IDELTA/HyperLedgerPOC/POC/frontEnd/src/pages/addCar.js"],"names":["React","makeStyles","InputAdornment","TextField","Button","toast","any","algosdk","require","crypto","algodAddress","algodToken","algodPort","AlgoSigner","account","algodClient","Algodv2","fs","path","indexer_token","indexer_server","indexer_port","indexerClient","Indexer","stateless_acc_addr","check","healthCheck","do","console","log","useStyles","theme","margin","spacing","hashPassPhrase","passPhrase","hash","createHash","update","digest","waitForConfirmation","algodclient","txId","status","lastRound","pendingInfo","pendingTransactionInformation","statusAfterBlock","getTestNetPrimaryAccount","window","connect","then","d","catch","e","error","accounts","ledger","length","JSON","stringify","callApp","client","index","appArgs","params","getTransactionParams","fee","flatFee","txn","makeApplicationNoOpTxn","address","txID","toString","base64Tx","encoding","msgpackToBase64","toByte","signedTxs","signTxn","signedTxn","base64ToMsgpack","blob","sendRawTransaction","transactionResponse","undefined","payment","to","amount","makePaymentTxnWithSuggestedParams","optIn","rand","Math","floor","random","data","results","compile","result","program","Uint8Array","Buffer","from","lsig","makeLogicSig","sender","appIndex","makeApplicationOptInTxn","rawSignedTxn","signLogicSigTransactionObject","tx","AddCar","classes","carID","setCarID","useState","carMake","setCarMake","carModel","setCarModel","carColor","setCarColor","carOwner","setCarOwner","handleCarID","event","target","value","handleCarModel","handleCarMake","handleCarColor","handleCarOwner","handleSubmit","push","createCarEvent","allData","startAdornment"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport { Button } from '@material-ui/core';\nimport {toast} from 'react-toastify';\nimport { any } from 'prop-types';\nconst algosdk = require('algosdk');\nconst crypto = require('crypto');\nconst algodAddress = \"https://testnet.algoexplorerapi.io/\";\nconst algodToken = \"\";\nconst algodPort =\"\";\nlet AlgoSigner;\nlet account;\nlet algodClient = new algosdk.Algodv2(algodToken, algodAddress, algodPort);\nconst fs = require('fs');\nconst path = require('path');\nconst indexer_token = \"\";\nconst indexer_server = \"https://testnet.algoexplorerapi.io/idx2/\";\nconst indexer_port = 0;\n\nlet indexerClient = new algosdk.Indexer(indexer_token, indexer_server, indexer_port);\nlet stateless_acc_addr;\nvar check =algodClient.healthCheck().do();\nif (check){\n    console.log(\"client connected\")\n}\n\nconst useStyles = makeStyles((theme) => ({\n    margin: {\n        margin: theme.spacing(1),\n    },\n}));\n\nfunction hashPassPhrase(passPhrase) {\n    const hash = crypto.createHash('sha256')\n    hash.update(passPhrase)\n    return hash.digest('hex')\n}\n\n// helper function to await transaction confirmation\n// Function used to wait for a tx confirmation\nconst waitForConfirmation = async function (algodclient, txId) {\n    let status = (await algodclient.status().do());\n    let lastRound = status[\"last-round\"];\n      while (true) {\n        const pendingInfo = await algodclient.pendingTransactionInformation(txId).do();\n        if (pendingInfo[\"confirmed-round\"] !== null && pendingInfo[\"confirmed-round\"] > 0) {\n          //Got the completed Transaction\n          console.log(\"Transaction \" + txId + \" confirmed in round \" + pendingInfo[\"confirmed-round\"]);\n          break;\n        }\n        lastRound++;\n        await algodclient.statusAfterBlock(lastRound).do();\n      }\n    };\n\n    async function getTestNetPrimaryAccount(){\n        window.AlgoSigner.connect()\n        .then((d) => {\n          console.log(\"Connect\")\n        })\n        .catch((e) => {\n          console.error(e);\n        });\n        await window.AlgoSigner.accounts({ledger: 'TestNet'})\n        .then((d) => {\n            if(d && d.length > 0){\n                console.log(`Account found: ${JSON.stringify(d[0])}`);\n                account = d[0];\n            }\n            else{\n                throw('Primary test account not found in AlgoSigner.');\n            }\n        })\n        .catch((e) => {\n            console.log(JSON.stringify(e),'bad');\n        });\n    }\n// call application \nasync function callApp(client, index, appArgs,accounts) {\n    // define sender\n   try{\n    if (typeof window.AlgoSigner !== 'undefined') {\n        console.log(\"algosigner installed\");\n      } else {\n        console.log(\"algosigner not installed\");\n      }\n      window.AlgoSigner.connect()\n      .then((d) => {\n        console.log(\"Connect\")\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n    getTestNetPrimaryAccount();\n    // get node suggested parameters\n    let params = await client.getTransactionParams().do();\n    // comment out the next two lines to use suggested fee\n    params.fee = 1000;\n    params.flatFee = true;\n\n    // create unsigned transaction   [str:addCar, str:Skoda, str: ]\n    //let state= await client.accountInformation(account.addr).do()\n    //let txn = algosdk.makeApplicationOptInTxn(sender, params, index);\n    let txn = algosdk.makeApplicationNoOpTxn(account.address, params, index, appArgs, accounts);\n    let txId = txn.txID().toString();\n    let base64Tx = window.AlgoSigner.encoding.msgpackToBase64(txn.toByte());\n\n    let signedTxs = await window.AlgoSigner.signTxn([\n     {\n        txn: base64Tx,\n     },\n    ]);\n\n    // Get the base64 encoded signed transaction and convert it to binary\n   let signedTxn = window.AlgoSigner.encoding.base64ToMsgpack(signedTxs[0].blob);    \n    // Sign the transaction\n    console.log(\"Signed transaction with txID: %s\", txId);\n\n    // Submit the transaction\n    await client.sendRawTransaction(signedTxn).do();\n\n    // Wait for confirmation\n    await waitForConfirmation(client, txId);\n\n    // display results\n    let transactionResponse = await client.pendingTransactionInformation(txId).do();\n    console.log(\"Called app-id:\",transactionResponse['txn']['txn']['apid'])\n    if (transactionResponse['global-state-delta'] !== undefined ) {\n        console.log(\"Global State updated:\",transactionResponse['global-state-delta']);\n    }\n    if (transactionResponse['local-state-delta'] !== undefined ) {\n        console.log(\"Local State updated:\",transactionResponse['local-state-delta']);\n    }\n    }catch(error){\n        console.log(`Failed: AddCar - ${error}`);\n        return 0;\n    }\n}\n\nasync function payment(to, amount, client){\n    try{\n    window.AlgoSigner.connect()\n      .then((d) => {\n        console.log(\"Connect\")\n      })\n      .catch((e) => {\n        console.error(e);\n      });\n    getTestNetPrimaryAccount();\n    // get node suggested parameters\n    let params = await client.getTransactionParams().do();\n    // comment out the next two lines to use suggested fee\n    params.fee = 1000;\n    params.flatFee = true;\n\n    // create unsigned transaction   [str:addCar, str:Skoda, str: ]\n    //let state= await client.accountInformation(account.addr).do()\n    //let txn = algosdk.makeApplicationOptInTxn(sender, params, index);\n    let txn = algosdk.makePaymentTxnWithSuggestedParams(account.address, to, amount);\n    let txId = txn.txID().toString();\n    let base64Tx = window.AlgoSigner.encoding.msgpackToBase64(txn.toByte());\n\n    let signedTxs = await window.AlgoSigner.signTxn([\n     {\n        txn: base64Tx,\n     },\n    ]);\n\n    // Get the base64 encoded signed transaction and convert it to binary\n   let signedTxn = window.AlgoSigner.encoding.base64ToMsgpack(signedTxs[0].blob);    \n    // Sign the transaction\n    console.log(\"Signed transaction with txID: %s\", txId);\n\n    // Submit the transaction\n    await client.sendRawTransaction(signedTxn).do();\n\n    // Wait for confirmation\n    await waitForConfirmation(client, txId);\n\n    // display results\n    let transactionResponse = await client.pendingTransactionInformation(txId).do();\n    console.log(\"Called app-id:\",transactionResponse['txn']['txn']['apid'])\n    if (transactionResponse['global-state-delta'] !== undefined ) {\n        console.log(\"Global State updated:\",transactionResponse['global-state-delta']);\n    }\n    if (transactionResponse['local-state-delta'] !== undefined ) {\n        console.log(\"Local State updated:\",transactionResponse['local-state-delta']);\n    }\n    }catch(error){\n        console.log(`Failed: AddCar - ${error}`);\n        return 0;\n    }\n\n}\nasync function optIn(){\n    try{\n         // get suggested parameters\n    const params = await algodClient.getTransactionParams().do();\n    // comment out the next two lines to use suggested fee\n    params.fee = 1000;\n    params.flatFee = true;\n\n    let rand =Math.floor(Math.random() * 2**64);\n    const data = \"#pragma version 4\\n\" + \"int \"+rand.toString()+\"\\n int 0\\n >\\n bz success\\n int 1\\nreturn \";\n    \n    const  results = await algodClient.compile(data).do();\n    console.log(\"Hash = \" + results.hash);\n    console.log(\"Result = \" + results.result);\n\n    const program = new Uint8Array(Buffer.from(results.result, \"base64\"));\n    \n    const lsig = algosdk.makeLogicSig(program);\n    console.log(\"lsig : \" + lsig.address());   \n\n    // create a transaction\n    const sender = lsig.address();\n    await payment(sender, 3000, algodClient);\n    stateless_acc_addr = sender;\n    const appIndex = 25351000;\n\n    const txn = algosdk.makeApplicationOptInTxn(sender, params, appIndex);\n\n    const rawSignedTxn = algosdk.signLogicSigTransactionObject(txn, lsig);\n\n    // send raw LogicSigTransaction to network\n    const tx = await algodClient.sendRawTransaction(rawSignedTxn.blob).do();\n    console.log(\"Transaction : \" + tx.txId);   \n    return lsig.address();\n    await waitForConfirmation(algodClient, tx.txId);\n    }catch(error){\n        console.log(error);\n    }\n}\n\n\n    \nexport default function AddCar() {\n    const classes = useStyles();\n    //States\n    const [carID, setCarID] = React.useState('')\n    const [carMake, setCarMake] = React.useState('')\n    const [carModel, setCarModel] = React.useState('')\n    const [carColor, setCarColor] = React.useState('')\n    const [carOwner, setCarOwner] = React.useState('')\n\n    //Handlers\n    const handleCarID = (event) => {\n        setCarID(event.target.value)\n    }\n\n    const handleCarModel = (event) => {\n        setCarModel(event.target.value)\n    }\n\n    const handleCarMake = (event) => {\n        setCarMake(event.target.value)\n    }\n\n    const handleCarColor = (event) => {\n        setCarColor(event.target.value)\n    }\n\n    const handleCarOwner = (event) => {\n        setCarOwner(event.target.value)\n    }\n\n    const handleSubmit = async () => {\n        try{\n        let appArgs = [];\n        appArgs.push(new Uint8Array(Buffer.from(\"addCar\")));\n        appArgs.push(new Uint8Array(Buffer.from(carID)));\n        appArgs.push(new Uint8Array(Buffer.from(carMake)));\n        appArgs.push(new Uint8Array(Buffer.from(carModel)));\n        appArgs.push(new Uint8Array(Buffer.from(carColor)));\n        await optIn();\n        let createCarEvent = await callApp(algodClient, 25351000, appArgs, [stateless_acc_addr]);\n        \n        }catch(error){\n            console.error(`Failed to evaluate transaction: ${error}`);\n        }\n    }\n\n    const allData = () => {\n        return {\n            'carID': carID,\n            'carColor': carColor,\n            'carModel': carModel,\n            'carOwner': carOwner,\n            'carMake': carMake\n        }\n    }\n\n    return (\n        <div>\n            <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"CarID\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handleCarID}\n            />\n            <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"Car Make\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handleCarMake}\n            />\n            <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"Car Model\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handleCarModel}\n            />\n            <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"Car Color\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handleCarColor}\n            />\n            <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"Car Owner\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handleCarOwner}\n            />\n            {/* <TextField\n                className={classes.margin}\n                id=\"input-with-icon-textfield\"\n                label=\"Secret Pass Phrase\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position=\"start\">\n                        </InputAdornment>\n                    ),\n                }}\n                onInput={handlePassPhrase}\n            /> */}\n            <Button onClick={handleSubmit}>\n                Submit\n            </Button>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}