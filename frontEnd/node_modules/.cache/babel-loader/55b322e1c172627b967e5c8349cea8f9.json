{"ast":null,"code":"var _jsxFileName = \"/Users/egecaner/IDELTA/HyperLedgerPOC/POC/frontEnd/src/pages/allCarInsurances.js\";\nimport React, { Component } from 'react';\nimport Cards from '../components/cards';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst algosdk = require('algosdk');\n\nconst indexer_token = \"\";\nconst indexer_server = \"https://testnet.algoexplorerapi.io/idx2/\";\nconst indexer_port = 0;\nlet indexerClient = new algosdk.Indexer(indexer_token, indexer_server, indexer_port);\nlet car_app_id = 25532407;\nlet insurance_app_id = 25540600;\n\nclass allCars extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      carList: []\n    };\n  }\n\n  async getAllCars() {\n    let data = [];\n    let insurances = [];\n    let acc = [];\n    let accountInfo = await indexerClient.searchAccounts().applicationID(car_app_id).do();\n\n    for (let i = 0; i < accountInfo.accounts.length; i++) {\n      let InsuranceID = accountInfo.accounts[i].address;\n\n      for (let j = 0; j < accountInfo.accounts[i]['apps-local-state'].length; j++) {\n        if (accountInfo.accounts[i]['apps-local-state'][j].id == insurance_app_id) {\n          if (accountInfo.accounts[i]['apps-local-state'][j]['key-value'] != null) {\n            if (accountInfo.accounts[i]['apps-local-state'][j]['key-value'].length >= 1) {\n              let acc = Buffer(accountInfo.accounts[i]['apps-local-state'][j]['key-value'][0].value.bytes, 'base64').toString('ascii');\n              acc.push(acc);\n              insurances.push(InsuranceID);\n            }\n          }\n        }\n      }\n    }\n\n    let accountsInfo = await indexerClient.searchAccounts().applicationID(car_app_id).do();\n\n    for (let i = 0; i < accountsInfo.accounts.length; i++) {\n      let Key = accountsInfo.accounts[i].address;\n\n      for (let j = 0; j < accountInfo.accounts[i]['apps-local-state'].length; j++) {\n        if (accountsInfo.accounts[i]['apps-local-state'][j].id == car_app_id && accountsInfo.accounts[i]['apps-local-state'][j]['key-value'] != null && acc.includes(Key) && accountsInfo.accounts[i]['apps-local-state'][j]['key-value'].length > 2) {\n          let color = Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][0].value.bytes, 'base64').toString('ascii');\n          let make = Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][1].value.bytes, 'base64').toString('ascii');\n          let model = Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][2].value.bytes, 'base64').toString('ascii');\n          let index = acc.indexOf(owner);\n          data.push({\n            Key: Key,\n            Record: {\n              owner: owner,\n              make: make,\n              model: model,\n              color: color,\n              insurance: insurances[index]\n            }\n          });\n        }\n      }\n    }\n\n    this.setState({\n      carList: data\n    });\n  }\n\n  componentDidMount() {\n    this.getAllCars();\n  }\n\n  render() {\n    console.log(this.state.carList);\n    return /*#__PURE__*/_jsxDEV(Cards, {\n      carList: this.state.carList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default allCars;","map":{"version":3,"sources":["/Users/egecaner/IDELTA/HyperLedgerPOC/POC/frontEnd/src/pages/allCarInsurances.js"],"names":["React","Component","Cards","algosdk","require","indexer_token","indexer_server","indexer_port","indexerClient","Indexer","car_app_id","insurance_app_id","allCars","state","carList","getAllCars","data","insurances","acc","accountInfo","searchAccounts","applicationID","do","i","accounts","length","InsuranceID","address","j","id","Buffer","value","bytes","toString","push","accountsInfo","Key","includes","color","make","model","index","indexOf","owner","Record","insurance","setState","componentDidMount","render","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Cards from '../components/cards'\nconst algosdk = require('algosdk');\nconst indexer_token = \"\";\nconst indexer_server = \"https://testnet.algoexplorerapi.io/idx2/\";\nconst indexer_port = 0;\n\nlet indexerClient = new algosdk.Indexer(indexer_token, indexer_server, indexer_port);\nlet car_app_id = 25532407;\nlet insurance_app_id = 25540600;\nclass allCars extends Component {\n\n    state = {\n        carList: []\n    }\n\n   async getAllCars(){\n        let data = [];\n        let insurances = [];\n        let acc =[]\n        let accountInfo = await indexerClient.searchAccounts()\n                .applicationID(car_app_id).do();\n        for (let i = 0; i < accountInfo.accounts.length; i++) {\n            let InsuranceID = accountInfo.accounts[i].address;\n            for (let j = 0; j < accountInfo.accounts[i]['apps-local-state'].length; j++) {\n                if(accountInfo.accounts[i]['apps-local-state'][j].id == insurance_app_id){\n                    if(accountInfo.accounts[i]['apps-local-state'][j]['key-value'] != null){\n                        if(accountInfo.accounts[i]['apps-local-state'][j]['key-value'].length >= 1) {\n                            let  acc =Buffer(accountInfo.accounts[i]['apps-local-state'][j]['key-value'][0].value.bytes, 'base64').toString('ascii');\n                            acc.push(acc);\n                            insurances.push(InsuranceID)\n                    }\n                }\n            }\n        }\n    }\n        let accountsInfo = await indexerClient.searchAccounts()\n            .applicationID(car_app_id).do();\n        for (let i = 0; i < accountsInfo.accounts.length; i++) {\n            let Key = accountsInfo.accounts[i].address;\n            for (let j = 0; j < accountInfo.accounts[i]['apps-local-state'].length; j++) {\n                if(accountsInfo.accounts[i]['apps-local-state'][j].id == car_app_id && accountsInfo.accounts[i]['apps-local-state'][j]['key-value'] != null && acc.includes(Key) && accountsInfo.accounts[i]['apps-local-state'][j]['key-value'].length > 2){    \n                        let color =Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][0].value.bytes, 'base64').toString('ascii');    \n                        let make =Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][1].value.bytes, 'base64').toString('ascii');    \n                        let model =Buffer(accountsInfo.accounts[i]['apps-local-state'][j]['key-value'][2].value.bytes, 'base64').toString('ascii'); \n                        let index = acc.indexOf(owner);\n                        data.push({Key:Key,Record:{owner:owner , make:make, model:model, color:color, insurance: insurances[index]}});\n                }   \n            }\n        }\n        this.setState({carList: data});\n        \n    }\n\n    componentDidMount(){    \n        this.getAllCars()\n    }\n\n    render() {\n        console.log(this.state.carList)\n        return (\n            <Cards carList={this.state.carList} />\n        );\n    }\n}\n\nexport default allCars;"]},"metadata":{},"sourceType":"module"}